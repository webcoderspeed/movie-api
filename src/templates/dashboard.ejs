<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>Favorite Movies</title>
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.7/dist/tailwind.min.css" rel="stylesheet">
</head>

<body class="bg-gray-200">

  <%- include('header.ejs', { user: user }) %>

  <main class="container mx-auto p-4 mt-4">
    <div class="flex justify-between items-center">
      <h1 class="text-2xl font-semibold text-gray-800">Movies</h1>
      <a href="/favourite-movies">
        Favorite Movies
      </a>
    </div>

    <% if (movies.length> 0) { %>
      <table class="min-w-full divide-y divide-gray-200 mt-4 overflow-x-scroll">
        <thead>
          <tr>
            <th class="px-4 py-2 text-left text-xs font-semibold text-gray-600">Movie Name</th>
            <th class="px-4 py-2 text-left text-xs font-semibold text-gray-600">Rating</th>
            <th class="px-4 py-2 text-left text-xs font-semibold text-gray-600">Genre</th>
            <th class="px-4 py-2 text-left text-xs font-semibold text-gray-600">Casts</th>
            <th class="px-4 py-2 text-left text-xs font-semibold text-gray-600">Release Date</th>
          </tr>
        </thead>
        <tbody>
          <% movies.forEach(movie=> { %>
            <tr>
              <td class="px-4 py-2 text-sm text-gray-600">
                <%= movie.movieName %>
              </td>
              <td class="px-4 py-2 text-sm text-gray-600">
                <%= movie.rating %>
              </td>
              <td class="px-4 py-2 text-sm text-gray-600">
                <%= movie.genre %>
              </td>
              <td class="px-4 py-2 text-sm text-gray-600">
                <% movie.cast.forEach(cast=> { %>
                  <%= cast.name %>,
                    <% }); %>
              </td>
              <td class="px-4 py-2 text-sm text-gray-600">
                <%= movie.releaseDate.toDateString() %>
              </td>

            </tr>
            <% }); %>
        </tbody>
      </table>
      <% } else { %>
        <p class="text-gray-600 text-lg mt-4">No movies exist.</p>
        <% } %>
  </main>

</body>

</html>